<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
	html,body{
		margin: 0;
		padding: 0;
	}
		.box{
			width: 60rem;
			height: 90rem;
			background: brown;
			position: relative;
			overflow: hidden;
		}
		button{
			width: 10rem;
			height: 5rem;
			text-align: center;
			background: gray;
			line-height: 5rem;
			font-size: 3rem;
			position: absolute;
		}
		.snack{
			background: green;
			position: absolute;
		}
		.child{
			width: 3rem;
			height: 3rem;
			background: green;
			float: left;
		}
		.fuck{
			width: 3rem;
			height: 3rem;
			background: red;
			position: absolute;
			top: 0;
			left: 9rem;
		}
	</style>
</head>
<body>
 <div class="box">
 		<div class="snack">
 				<div class="child"></div>
 		</div>
 		<div class="fuck"></div>
 </div>
 <button style="left: 50%;transform: translateX(-50%);">上</button>
 <button style="left: 50%;transform: translateX(-50%); bottom: 0">下</button>
 <button style="left: 10rem;bottom: 10rem">左</button>
 <button style="right: 10rem; bottom: 10rem">右</button>
 <button style="color: red;font-size: 2rem">暂停</button>
 <script>
 	 var box = document.querySelector('.box');
 	 var snack = document.querySelector('.snack');
 	 var timer;
 	 var _bottom_ = parseInt(window.getComputedStyle(document.querySelector('.snack'), box).height);
 	 var width = snack.getBoundingClientRect().width;
 	 var moveHandle = function (dir) {
 	 	 var left = parseInt(window.getComputedStyle(document.querySelector('.snack'), null).left);
 	 	 var right = parseInt(window.getComputedStyle(document.querySelector('.snack'), null).right);
 	 	 var top = parseInt(window.getComputedStyle(document.querySelector('.snack'), null).top);
 	 	 var bottom = parseInt(window.getComputedStyle(document.querySelector('.snack'), null).bottom);
 	 	 if(dir == 'left') {
 	 	 	left > 0 ? (createTimer('left')) : {}
 	 	 }
 	 	 if(dir == 'right') {
 	 	 		right > 0 ? (createTimer('right')) : {}
 	 	 }
 	 	 if(dir == 'up') {
 	 	 		top > 0 ? (createTimer('up')) : {}
 	 	 }
 	 	 if(dir == 'down') {

 	 	 		bottom > (window.screen.height - _bottom_) ? (createTimer('down')) : {}
 	 	 }
 	 }
 	var move = function (dir) {
 			 var left = parseInt(window.getComputedStyle(document.querySelector('.snack'), null).left);
 	 	 var right = parseInt(window.getComputedStyle(document.querySelector('.snack'), null).right);
 	 	 var top = parseInt(window.getComputedStyle(document.querySelector('.snack'), null).top);
 	 	 var bottom = parseInt(window.getComputedStyle(document.querySelector('.snack'), null).bottom);
 		if(dir == 'right') {
 			right > 0 ? (snack.style.left = left + width + 'px') 
 			: (clearInterval(timer),alert('撞墙了'))
 		}
 		if(dir == 'left') {
 	 	 	left > 0 ? (snack.style.right = right + width + 'px') : (clearInterval(timer),alert('撞墙了'))
 	 	 }
 	 	 if(dir == 'up') {
 	 	 		top > 0 ? (snack.style.top = bottom + width + 'px') : (clearInterval(timer),alert('撞墙了'))
 	 	 }
 	 	 if(dir == 'down') {
 	 	 		bottom <= _bottom_ ? (snack.style.top = top + width + 'px') 
 	 	 		: (clearInterval(timer),alert('撞墙了'))
 	 	 }
 	 	 checkFoods(window.getComputedStyle(document.querySelector('.snack'), null).left,window.getComputedStyle(document.querySelector('.snack'), null).top)
 	}
 	var createTimer = function (dir) {
 		clearInterval(timer);
 		timer = setInterval(() => {
 			move(dir)
 		}, 500)
 	}

 	var checkFoods = function (left, top) {
 		var pos = document.querySelector('.fuck').getBoundingClientRect();
 		if(pos.left == left && pos.top == top) {
 			addElement();
 		}
 	}

 	var addElement = function () {
 		var ele = document.createElement('div');
 		ele.className = 'child';
 		snack.append(ele);
 		randomPos();
 	}

 	var randomPos = function () {
 		var _w = box.getBoundingClientRect().width;
 		var _h = box.getBoundingClientRect().height;
 		var left = Math.random()*_w + 'px';
 		var top = Math.random()*_h + 'px';
 		document.querySelector('.fuck').style.left = left;
 		document.querySelector('.fuck').style.top = top;
 	}

 	var buttons = document.querySelectorAll('button');

 	buttons[0].ontouchstart = function () {
 		moveHandle('up')
 	}
 	buttons[1].ontouchstart = function () {
 		moveHandle('down')
 	}
 	buttons[2].ontouchstart = function () {
 		moveHandle('left')
 	}
 	buttons[3].ontouchstart = function () {
 		moveHandle('right')
 	}
 	buttons[4].ontouchstart = function () {
 		clearInterval(timer);
 	}

 	moveHandle('right')
 	
 </script>
</body>
</html>